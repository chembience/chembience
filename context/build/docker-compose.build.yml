version: '3.9'

services:

  base:
    image: chembience/base:${CHEMBIENCE_VERSION}
    build:
      context: base/
      args:
        conda_package: ${CONDA_PACKAGE}
        conda_py: ${CONDA_PY}
    environment:
      - CHEMBIENCE_UID
      - CHEMBIENCE_GID

#  python-base:
#    image: chembience/python-base:${CHEMBIENCE_VERSION}
#    build:
#      context: python/
#      args:
#        build_tag: ${CHEMBIENCE_VERSION}
#        conda_py: ${CONDA_PY}
#        conda_package: ${CONDA_PACKAGE}
#    depends_on:
#      - base

#  rdkit:
#    image: chembience/rdkit:${CHEMBIENCE_VERSION}
#    build:
#      context: rdkit/
#      args:
#        build_tag: ${CHEMBIENCE_VERSION}
#        conda_py: ${CONDA_PY}
#        rdkit_version: ${RDKIT_VERSION}
#    depends_on:
#      - base

  django:
    image: chembience/django:${CHEMBIENCE_VERSION}
    build:
      context: django/
      args:
        build_tag: ${CHEMBIENCE_VERSION}
        conda_py: ${CONDA_PY}
    depends_on:
      - base

  jupyter:
    image: chembience/jupyter:${CHEMBIENCE_VERSION}
    build:
      context: jupyter/
      args:
        build_tag: ${CHEMBIENCE_VERSION}
        conda_py: ${CONDA_PY}
    depends_on:
      - base




