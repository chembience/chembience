version: '3'

services:

  base:
    image: chembience/base:${CHEMBIENCE_VERSION}
    build:
      context: base/
    environment:
      - CHEMBIENCE_UID
      - CHEMBIENCE_GID


  python-base:
    image: chembience/python-base:${CHEMBIENCE_VERSION}
    build:
      context: python/
      args:
        build_tag: ${CHEMBIENCE_VERSION}
        conda_py: ${CONDA_PY}
        conda_package: ${CONDA_PACKAGE}
    depends_on:
      - base


  rdkit-base:
    image: chembience/rdkit-base:${CHEMBIENCE_VERSION}
    build:
      context: rdkit/
      args:
        build_tag: ${CHEMBIENCE_VERSION}
        conda_py: ${CONDA_PY}
        rdkit_version: ${RDKIT_VERSION}
    depends_on:
      - python-base


  django-base:
    image: chembience/django-base:${CHEMBIENCE_VERSION}
    build:
      context: django/
      args:
        build_tag: ${CHEMBIENCE_VERSION}
        conda_py: ${CONDA_PY}
    depends_on:
      - rdkit-base


  jupyter-base:
    image: chembience/jupyter-base:${CHEMBIENCE_VERSION}
    build:
      context: jupyter/
      args:
        build_tag: ${CHEMBIENCE_VERSION}
        conda_py: ${CONDA_PY}
    depends_on:
      - rdkit-base




